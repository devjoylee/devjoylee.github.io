{"componentChunkName":"component---src-templates-post-jsx","path":"/auth-flow/","result":{"data":{"site":{"siteMetadata":{"title":"joy.blog"}},"markdownRemark":{"id":"63995415-94b3-541a-be95-4287fae1235a","excerpt":"등록 (Register) Resource Server에서 Client 를 새로 생성한다. Client ID : 애플리케이션 식별 ID (노출 가능) Client Secret : 식별 비밀번호 (노출 X) Authorized Redirect URLs : server로부터 데이터를 받을 주소 Resource Owner의 승인 Owner → Client : 특…","html":"<h2>등록 (Register)</h2>\n<p>Resource Server에서 Client 를 새로 생성한다.</p>\n<ul>\n<li>Client ID : 애플리케이션 식별 ID (노출 가능)</li>\n<li>Client Secret : 식별 비밀번호 (노출 X)</li>\n<li>Authorized <strong>Redirect URLs</strong> : server로부터 데이터를 받을 주소</li>\n</ul>\n<img src='https://user-images.githubusercontent.com/68415905/164886171-79ae9fd7-b11d-4316-902c-69bd31dc4d0e.png' alt='auth' width='300px'>\n<h2><strong>Resource Owner의 승인</strong></h2>\n<ol>\n<li>Owner → Client : 특정 작업 요청</li>\n<li>\n<p>Client → Owner : Server요청을 위한 화면 전송 (ex Google/Naver Login 버튼)</p>\n<p>이때, 버튼은 서버요청에 필요한 링크를 포함한다.</p>\n<p><em><a href=\"https://resource.server/?**client_id**=1&#x26;**scope**=B,C&#x26;**redirect_uri**=http://client/callback\">https://resource.server/?**client_id**=1&#x26;**scope**=B,C&#x26;**redirect_uri**=http://client/callback</a></em></p>\n<p><code class=\"language-text\">client_id</code> ****: 요청을 보내는 클라이언트 ID</p>\n<p><code class=\"language-text\">scope</code> : server에 요청할 작업 목록(ex, username가져오기.. 등)</p>\n<p><code class=\"language-text\">redirect_uri</code> <strong>:</strong> 요청 완료 시 이동할 주소 (서버에 저장된 주소와 다르면 이동 x)</p>\n</li>\n<li>Owner → Server : 버튼 클릭 시, 위 주소로 서버에 접속 요청</li>\n<li>\n<p>Server → Owner : 로그인 여부 확인 후, 로그인 창 전송</p>\n<img src='https://user-images.githubusercontent.com/68415905/164886170-389cb7b0-9933-4cd1-ba1f-7c2e4cf76700.png' alt='auth' width='300px'>\n</li>\n<li>Owner → Server : 로그인</li>\n<li>\n<p>Server → Owner :</p>\n<p>1). <code class=\"language-text\">client_id</code> <strong>값이 있는지 확인</strong></p>\n<p>2). 요청받은 <code class=\"language-text\">redirect_uri</code> 값과 저장된 <code class=\"language-text\">redirect_uri</code>값이 같은지 확인 (다르면 종료)</p>\n<p>3). 1,2 가 모두 확인 되면 <code class=\"language-text\">scope</code>에 해당되는 권한을 client가 사용하는 것에 대한 동의창 전송</p>\n<img src='https://user-images.githubusercontent.com/68415905/164886168-04fd1365-9074-4156-b4b0-1617612bb38f.png' alt='auth' width='300px'>\n</li>\n<li>\n<p>Owner → Server : 권한에 동의하면 Server에 <code class=\"language-text\">userId</code> 와 <code class=\"language-text\">scope</code>에 해당하는 데이터가 저장됨</p>\n<p>(<code class=\"language-text\">userId</code> 에 해당하는 Owner는 <code class=\"language-text\">scope</code> 데이터에 대한 권한을 동의하였음을 표시)</p>\n</li>\n</ol>\n<h2>Resource Server의 승인</h2>\n<ol>\n<li>\n<p><strong>Server → Owner → Client</strong> : authorization code 전송</p>\n<p>Client에 authorization code값이 저장됨 (<code class=\"language-text\">Location</code>: <a href=\"https://client/callback?code-3\">https://client/callback?code-3</a> )</p>\n<img src='https://user-images.githubusercontent.com/68415905/164886167-7b1e1d0f-3767-4ddf-9617-dfed32b4e7ee.png' alt='auth' width='650px'>\n</li>\n<li>\n<p>Client → Server</p>\n<p>Server에 직접 접속하여 전송.</p>\n<p><em><a href=\"https://resource.server/token?**grant_type**=authorization_code&#x26;**code**=3&#x26;**redirect_uri**=http://client/callback&#x26;**client_id**=1&#x26;**client_secret**=2\">https://resource.server/token?**grant_type**=authorization_code&#x26;**code**=3&#x26;**redirect_uri**=http://client/callback&#x26;**client_id**=1&#x26;**client_secret**=2</a></em></p>\n<p><code class=\"language-text\">grant_type</code> *<em>\\</em>* : 3자 인증 방식 (<em>authorization_code)\\</em></p>\n<p><code class=\"language-text\">code</code> : authorization_code 값</p>\n<p><code class=\"language-text\">redirect_uri</code> / <code class=\"language-text\">client_id</code> / <code class=\"language-text\">client_secret</code> : Client 정보</p>\n<img src='https://user-images.githubusercontent.com/68415905/164886165-5295697f-928c-4125-9cd5-dda925e3eaa9.png' alt='auth' width='300px'>\n</li>\n<li>Server → Client : 요청 받은 authorization<em>code 에 해당하는 정보의 `redirect</em>uri<code class=\"language-text\">/</code>client<em>id<code class=\"language-text\">/</code>client</em>secret` 값이 일치 하는 지 확인</li>\n</ol>","frontmatter":{"title":"OAuth 2.0 흐름 파악하기","date":"April 23, 2022","update":"April 23, 2022","tags":["auth"],"series":"OAuth Service"},"fields":{"slug":"/auth-flow/","readingTime":{"minutes":2.385}}},"seriesList":{"edges":[{"node":{"id":"1663b8b8-d0e3-563d-96e0-afb3b94be625","fields":{"slug":"/about-auth/"},"frontmatter":{"title":"OAuth 2.0 의 개념 및 용어 정리"}}},{"node":{"id":"4a968e5e-da06-5dff-8f31-d3f829f0d4a1","fields":{"slug":"/google-auth-firebase/"},"frontmatter":{"title":"구글 로그인 기능 with Firebase"}}},{"node":{"id":"63995415-94b3-541a-be95-4287fae1235a","fields":{"slug":"/auth-flow/"},"frontmatter":{"title":"OAuth 2.0 흐름 파악하기"}}}]},"previous":{"fields":{"slug":"/google-auth-firebase/"},"frontmatter":{"title":"구글 로그인 기능 with Firebase"}},"next":null},"pageContext":{"id":"63995415-94b3-541a-be95-4287fae1235a","series":"OAuth Service","previousPostId":"4a968e5e-da06-5dff-8f31-d3f829f0d4a1","nextPostId":null}},"staticQueryHashes":[]}
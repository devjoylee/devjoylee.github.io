{"componentChunkName":"component---src-templates-post-jsx","path":"/husky/","result":{"data":{"site":{"siteMetadata":{"title":"joy.blog"}},"markdownRemark":{"id":"8f667285-8ab0-5043-b4ae-f4fc69bad25e","excerpt":"1. lint-staged : 에러 판독기 git에서 staged된 상태 파일들에 한해 lint를 실행하여 커밋 전에 코드 스타일을 검사하고 수정하는 도구 협업 환경에서는 모든 개발자가 일관된 코드 품질을 유지하는 것이 중요하다. 하지만 개발 환경이 모두 다르기때문에 코드 스타일 규칙이 지켜지지 않는 경우가 종종 발생한다. 이러한 문제를 해결하기 위해 l…","html":"<h2>1. lint-staged : 에러 판독기</h2>\n<blockquote>\n<p>git에서 staged된 상태 파일들에 한해 lint를 실행하여 커밋 전에 코드 스타일을 검사하고 수정하는 도구</p>\n</blockquote>\n<p>협업 환경에서는 모든 개발자가 일관된 코드 품질을 유지하는 것이 중요하다. 하지만 개발 환경이 모두 다르기때문에 코드 스타일 규칙이 지켜지지 않는 경우가 종종 발생한다. 이러한 문제를 해결하기 위해 lint-staged와 husky를 함께 사용하여 프로젝트에 자동화된 linting 프로세스를 설정할 수 있다.</p>\n<h3>설치 및 설정</h3>\n<ol>\n<li>lint-staged 를 설치한다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> i <span class=\"token parameter variable\">-D</span> lint-staged</code></pre></div>\n<ol start=\"2\">\n<li>package.json에 아래와 같이 lint-staged 설정을 추가한다.<br/>\n(src 디렉토리 내의 js 및 ts 파일에 대해 eslint와 prettier를 순차적으로 실행하여 코드 포맷팅 및 스타일 검사를 수행)</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">\n  <span class=\"token property\">\"lint-staged\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"*.{js,jsx,ts,tsx}\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">\"eslint --fix --max-warnings=0\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// warn, error가 둘다 없을때만 통과</span>\n      <span class=\"token comment\">// \"eslint --fix\",  // error가 없으면 통과 (warn은 패스)</span>\n      <span class=\"token string\">\"prettier --write\"</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"3\">\n<li>아래 명령어로 lint-staged를 실행한다. (staged 상태인 파일만 검사)</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">npx lint-staged</code></pre></div>\n<br/>\n<h2>2. husky : pre-commit 실행도구</h2>\n<p>husky는 git hook을 관리하고 설정하는 도구로 코드가 커밋되기 전에 필요한 작업을 자동으로 실행한다 (pre-commit). <br/> 즉, husky를 사용하여 커밋 할 때마다 자동으로 lint-staged를 실행시켜 코드를 검사할 수 있다. <br/></p>\n<h3>설치 및 설정</h3>\n<ol>\n<li>husky를 설치한다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># husky 초기화 (.husky 폴더 생성)</span>\nnpx husky-init <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">npm</span> <span class=\"token function\">install</span>\n\n<span class=\"token comment\"># husky - Git hooks install</span>\nnpx husky <span class=\"token function\">install</span></code></pre></div>\n</br>\n<ol start=\"2\">\n<li>package.json에 아래 명령어가 추가된 것을 확인한다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"prepare\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"husky install\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n</br>\n<ol start=\"3\">\n<li><code class=\"language-text\">.husky > pre-commit</code> 파일을 아래 내용처럼 작성한다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/usr/bin/env sh</span>\n<span class=\"token builtin class-name\">.</span> <span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">dirname</span> -- <span class=\"token string\">\"<span class=\"token variable\">$0</span>\"</span><span class=\"token variable\">)</span></span>/_/husky.sh\"</span>\n\nnpx lint-staged</code></pre></div>\n<h3>작동 방식</h3>\n<ol>\n<li>staged 상태의 코드를 커밋한다.</li>\n<li>Husky가 pre-commit 훅을 실행시킨다.</li>\n<li>pre-commit에 저장된 lint-staged 명령어가 실행된다</li>\n<li>lint-staged가 실행되어 스테이지 상태의 파일들에 대해 eslint와 prettier 검사를 수행한다.</li>\n<li>에러 혹은 경고가 발견되면 커밋이 취소되고 오류 메시지가 출력된다.</li>\n</ol>\n<br/>\n<br/>\n<blockquote>\n<p>REFERENCE<br /> How to Install Commitlint &#x26; Husky [2024] <a href=\"https://medium.com/@abpeter14/how-to-install-commitlint-husky-2024-f1157f14006f\">https://medium.com/@abpeter14/how-to-install-commitlint-husky-2024-f1157f14006f</a></p>\n</blockquote>","frontmatter":{"title":"협업을 위한 프로젝트 설정 - husky + lint-staged","date":"June 21, 2024","update":"June 21, 2024","tags":["frontend","development"],"series":"Dev Environment"},"fields":{"slug":"/husky/","readingTime":{"minutes":2.98}}},"seriesList":{"edges":[{"node":{"id":"6a885fc6-db67-5e8e-87eb-b695ef8c1df6","fields":{"slug":"/eslint/"},"frontmatter":{"title":"협업을 위한 프로젝트 설정 - ESLint"}}},{"node":{"id":"76430891-9c35-5424-8f64-5ce947d3c32e","fields":{"slug":"/prettier/"},"frontmatter":{"title":"협업을 위한 프로젝트 설정 - Prettier"}}},{"node":{"id":"8f667285-8ab0-5043-b4ae-f4fc69bad25e","fields":{"slug":"/husky/"},"frontmatter":{"title":"협업을 위한 프로젝트 설정 - husky + lint-staged"}}}]},"previous":{"fields":{"slug":"/prettier/"},"frontmatter":{"title":"협업을 위한 프로젝트 설정 - Prettier"}},"next":null},"pageContext":{"id":"8f667285-8ab0-5043-b4ae-f4fc69bad25e","series":"Dev Environment","previousPostId":"76430891-9c35-5424-8f64-5ce947d3c32e","nextPostId":null}},"staticQueryHashes":[],"slicesMap":{}}